<!DOCTYPE html>

    <html lang="en">

        <head>
            <meta charset="UTF-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Precios</title>
            <link rel="stylesheet" href="estilos/estilos13.css" type="text/css">
            <link rel="stylesheet" href="assets/css/bootstrap.css" type="text/css"/>
        </head>

        <body style="background-color: cadetblue;">

            <div class="container p-4">

                <section style="text-align: center; color:red;">
            
                    <h1 style="font-size: 63px;font-family: 'Times New Roman', Times, serif;"> Lista de libros con sus respectivos precios </h1>

                </section>
       

        
                <div style="border: double 5px; margin-top: 13px;  background-color: #76D7C4; height: 1615px;">  
      
                    <br>

                        <button style="border: solid 1.9px black; margin-left: 10px; color: white "  class="btn btn-secondary" data-toggle="modal" data-target="#myModalAdd"> Añadir </button>

                    <br>

                    <br>

                    <table style="margin-left: 20px; border: solid 3px; width: 1042.2px; margin-bottom:100px; background-color: #D5DBDB;"  class="table table-striped" id="mytable">

                        <thead>

                            <th style="padding-top: 33px; padding-left:17px"> Código </th>
                            <th style="padding-left: 73px;"> Descripción </th>
                            <th style="padding-right:52px; padding-left: 38px;"> Precio </th>
               

                        </thead>

                        <tbody>

                            {{#each results}}

                                <tr>

                                    <td style="padding-right: 100px; padding-left:21px;"> {{ Codigo }} </td>
                                    <td style="padding-right: 90px;"> {{ Descripcion }} </td>
                                    <td style="padding-left: 53px;"> ${{ Precio }} </td>
        
                                    <td style="padding-bottom: 50px; padding-left: 25px;">

                                        <a href="javascript:void(0);" style="margin-left: 60px;" class="btn btn-dark edit" data-Codigo="{{Codigo}}" data-Descripcion="{{Descripcion}}" data-Precio="{{Precio}}"> 

                                            Editar datos
                        
                                        </a>  

                                        <a href="javascript:void(0);" class="btn btn-danger delete" data-Codigo="{{Codigo}}"> 

                                            Eliminar datos
                        
                                        </a>

                                    </td>
                
                                </tr>
                                
                            {{/each}}

                        </tbody>

                    </table>

                </div>

                <!-- FORMULARIO PARA AGREGAR UN NUEVO DATO-->

                <form action="/save" method="post">  

                    <div class="modal fade" id="myModalAdd" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">

                        <div  class="modal-dialog" role="document">

                            <div  class="modal-content">

                                <div class="modal-header">

                                        <h5  class="modal-title" id="exampleModalLabel"> Añadir un nuevo dato </h5>

                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">

                                        <span aria-hidden="true">&times;</span>

                                    </button>

                                </div>

                                <div class="modal-body">

                                    <div class="form-group">

                                        <input style="height: 45px;"  type="text" name="Descripcion" class="form-control" placeholder="Nombre del libro" required>
                
                                    </div>

                                    <div class="form-group">

                                        <input style="height: 45px;" type="text" name="Precio" class="form-control" placeholder="Precio" required>
                
                                    </div>

                                </div>

                                <div class="modal-footer">

                                    <button type="button" class="btn btn-primary" style="background-color: #DC7633 ;" data-dismiss="modal"> Cerrar </button>
                                    
                                    <button type="submit" class="btn btn-primary" style="background-color: #5499C7"> Guardar </button>
                                
                                </div>

                            </div>

                        </div>

                    </div>

                </form>

                {{!--FORMULARIO PARA EDITAR UN DATO--}}

                <form action="/update" method="post">

                    <div class="modal fade" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">

                        <div class="modal-dialog" role="document">

                            <div class="modal-content">

                                <div class="modal-header">

                                        <h5 class="modal-title" id="exampleModalLabel"> Editar dato </h5>

                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">

                                        <span aria-hidden="true">&times;</span>
                                    
                                    </button>
                                
                                </div>

                                <div class="modal-body">

                                    <div class="form-group">

                                        <input style="height: 45px;" type="text" name="Descripción" class="form-control Descripción" placeholder="Descripción" required>
                
                                    </div>

                                    <div class="form-group">

                                        <input style="height: 45px;" type="text" name="Precio" class="form-control Precio" placeholder="Precio" required>

                                    </div>
                                
                                </div>

                                <div class="modal-footer">

                                    <input type="hidden" name="Codigo" class="Codigo">

                                    <button  style="background-color: #DC7633 ;" type="button" class="btn btn-primary" data-dismiss="modal"> Cerrar </button>
                                    
                                    <button  style="background-color: #27AE60 ;" type="submit" class="btn btn-primary"> Actualizar </button>
                
                                </div>
                            
                            </div>
            
                        </div>
            
                    </div>
   
                </form>

               {{!--FORMULARIO PARA ELIMINAR DATOS--}}

                <form id="add-row-form" action="/delete" method="post">

                    <div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                
                        <div class="modal-dialog">
                            
                            <div class="modal-content">
                   
                                <div class="modal-header">
                                    
                                        <h5 class="modal-title" id="myModalLabel"> Borrar dato </h5>
                        
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    
                                </div>

                                <div class="modal-body">

                                    <strong>¿Estás seguro de borrar este dato?</strong>

                                </div>

                                <div class="modal-footer">
                    
                                    <input type="hidden" name="Codigo" class="form-control Codigo2" required>
                            
                                    <button style="background-color: #DC7633 ;" type="button" class="btn btn-primary" data-dismiss="modal"> Cerrar </button>
                            
                                    <button style="background-color: #CC1B1B;" type="submit" class="btn btn-primary"> Eliminar </button>

                                </div>
                        
                            </div>
                
                        </div>
            
                    </div>
        
                </form>
            
            </div>     


            <script src="assets/js/jquery-3.3.1.js"></script>
            <script src="assets/js/bootstrap.js"></script>

            <script>

                $(document).ready(function(){

                    //Mostrar datos en la tabla para editar el registro

                    $('#mytable').on('click', '.edit', function(){

                        let Codigo = $(this).data('Codigo');//Declaración de variables
                        let Descripcion = $(this).data('Descripcion');
                        let Precio = $(this).data('Precio');
                        $('#EditModal').modal('show');
                        $('.Descripcion').val(Descripcion);
                        $('.Precio').val(Precio);
                        $('.Codigo').val(Codigo);

                    })


                    $('#mytable').on('click', '.delete', function(){

                        let Codigo = $(this).data('Codigo');
                        $('#DeleteModal').modal('show');
                        $('.Codigo2').val(Codigo);

                    })

                })

            </script>

        </body>

</html>

        <script src="assets/js/jquery-3.3.1.js"></script>
        <script src="assets/js/bootstrap.js"></script>

        <script>

            $(document).ready(function(){

                $('#mytable').on('click', '.edit', function(){

                    let Codigo= $(this).data('Codigo');
                    let Descripcion = $(this).data('Descripcion');
                    let Precio = $(this).data('Precio');
                    $('#EditModal').modal('show');  
                    $('.Codigo').val(Codigo);
                    $('.Descripcion').val(Descripcion);
                    $('.Precio').val(Precio);

                })

                $('#mytable').on('click', '.delete', function(){

                    let Codigo = $(this).data('Codigo');
                    $('#DeleteModal').modal('show');
                    $('Codigo2').val(Codigo);

                })

            })

        </script>

    </body>

</html>